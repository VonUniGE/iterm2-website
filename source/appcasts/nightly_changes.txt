2021-06-27: Prompt to delete the restoration db if verifying
its integrity takes over 10 seconds. Issue 9643

2021-06-27: Extend top line of tabbar from left of 'new tab'
button all the way to the edge of the window. Issue 9787

2021-06-27: Make extra space advanced pref work on windows
without visible window numbers.

Issue 8021

2021-06-27: Add iTerm2-shell-integration submodule. Update
copy_shell_integration.sh to pull from it.

I decided to keep a separate copy in the iTerm2 repo because
it needs a good bit of processing to be useful and I want to
keep the main repo dependency-free. Submodules already
require manual work to update, anyway, so the number of
steps remains the same.

2021-06-27: Assert that the foreground color is never set to
nil. Issue 9785

2021-06-27: [Python] Remove Splitter.__sessions

In the case of nested splitters, __sessions was not updated
when a child's sessions were changed. I think that
__sessions is an unnecessary optimization that adds a bunch
of complexity including this bug.

It manifested in issue 9784: changing a session's preferred
size had no effect. The reason is that the protobuf was
built by doing a DFS through __children but the tab.sessions
accessor uses __sessions which referred to different
objects.

While this change could affect user code I think the impact
will be limited to scripts affecting nested sessions. I
expect breakage will be on code that worked by accident.

2021-06-26: Make font configurable in text status bar
components. Issue 9782

2021-06-26: Add Inject trigger. This is the first real Swift
code in the main app :). Issue 9779

2021-06-26: Use CONFIGURATION_TEMP_DIR for user header
search paths to find -swift.h files

2021-06-26: Brighten regular color scheme's light mode
background color

2021-06-26: Add DECSET 2026 for synchronized updates. See
https://github.com/microsoft/terminal/issues/8331

2021-06-23: Fix golden tests. Use dark background and leave
background color transparent

2021-06-23: Make it possible to use Swift.

2021-06-20: Remove advanced pref userFixedPitchFontOfSize

2021-06-20: Fix load color preset action, which had not been
updated for separate light/dark mode support

2021-06-20: Use session font for timestamps. Issue 9778

2021-06-20: [BFP] Rebuild BetterFontPicker framework to try
to fix crash from issue 9688

2021-06-19: Prevent UB when a sparklines component's width
is huge

2021-06-19: [BFP] Prevent a crash when the family picker's
menu somehow gets out of sync with the internal model

2021-06-18: Clean up odds and ends from the great color mode
change.

This wraps up issue 7943 (Switching profiles based on system
appearance)

2021-06-18: Add light/dark APIs to profile.py and expose
WriteOnlyProfile (which was accidentally not exposed before)

2021-06-18: Replace profile.py with generated version

2021-06-18: Add gen_profile.py which generates profile.py to
make it easier to keep in sync.

Do `make iterm2/profile.py` to update it.

2021-06-17: Sort out presets and update default profile

2021-06-14: Add support for separate light/dark mode colors.
Still needs work: default profiles need to be updated,
Python API needs support, and wonky things happen when
switching between different profiles. Also sometimes the
editing popup button is not enabled when it should be.

2021-06-12: When you drag a top statusbar in a no-titlebar
window with a single tab and no split panes drag the window
instead of the tab. Issue 8123

2021-06-12: Remove SHA-1 comment from changelog

2021-06-12: Make c-j in CSI u mode send a control sequence.
Issue 9052

2021-06-11: Add debug logging for automatic command
completion

2021-06-11: Disable GPU renderer when low power mode is
enabled

2021-06-11: Fix warnings from xcode 13

2021-06-11: Make timestamps visibility a profile property
and add the option to show on hover over scrollbar. Issue
4492

2021-06-11: Add Dynamic Profile Parent GUID. Issue 9766

2021-06-11: Ensure TTY size is set after we get a file
descriptor. Issue 9742

2021-06-09: Unset SHLVL in child processes. Issue 9756

2021-06-08: Preliminary fixes for macOS Monterey (#445)

* Add missing CoreGraphics imports

* Only setFrame when the frame has changed

This fixes an infinite recursion bug on macOS Monterey.
2021-06-07: Use emacsclients with older deployment targets.
Issue 9760

2021-06-07: Add profile preference to open password manager
automatically. Issue 6167

2021-06-06: Rebuild colorpicker

2021-06-06: Modernize CPK for 10.14 SDK. Fix a bug where
text wasn't vertically centered in favorites.

2021-06-06: [ColorPicker] Request screen capture permission
when you try to use the eyedropper.

2021-06-06: reveal session before opening its password
manager so that it will be unburied if needed. Issue 9734

2021-06-05: Fix CSI u mode C-i and C-m, broken by
5cffd254b75643cb33b8d1d3f6533522a9bd58b3

2021-06-05: Fix a bug where the screen contents are
double-restored. Issue 9754

2021-06-05: Fix a bug where DCS garbage checking was broken
by commit c934e493a0745f68722f959818226d4c98022090

2021-06-05: Fix failing unit tests

Note the change to LineBlock and LineBuffer resolves a
problem introduced in commit
ee085065ada01f3968a96a96ce50b3f3c96a697e.

2021-06-05: Convert click coordinates to the adjusted
document visible rect before using them. This fixes a bug
where scrolling while there is new input coming + scrollback
overflow causes the selection to jump around. That's because
the click location is given to us by the OS based on where
the scrollview is scrolled to, but that doesn't exactly
correspond to what the user sees since we account for
scrollback overflow when drawing to keep the screen stable
when userScroll is on.

2021-06-05: When copying the server binary over, remove the
old one first.

2021-06-05: Fix a bug where the content jumps around when
scrolled up and there's scrollback overflow. Issue 9755

2021-06-03: Make opening tabs from the dashboard treat the
tmux windows as non-anonymous to avoid their opening as tabs
in the current window. They should open in their own window.
Also fix the appearance of selected rows in the window table
of the tmux dashboard. Issue 9746

2021-06-03: Don't send focus reports when password manager
is opening, open, or closing. Issue 9748

2021-06-01: Add debug logging to help time session
initialization

2021-05-29: Fix how tableview height is calculated to work
right in big sur. Issue 9728

2021-05-29: Fix error reporting for nightly build

2021-05-29: Fix debug log for user-supplied URL conversion

2021-05-28: Assume openssh private keys are encrypted since
it's impossible to tell through libssh2's APIs. See also
https://github.com/libssh2/libssh2/issues/608. Issue 9713

2021-05-28: [python] Add support for websockets 9.x

2021-05-26: Add import/export buttons to actions and
snippets in prefs. Issue 9724

2021-05-22: Don't check idempotent triggers when the screen
hasn't changed

2021-05-22: Add debug logging for highlight triggers

2021-05-22: Fix absolute line numbers for idempotent
triggers

2021-05-22: Use NSCompositingOperationSourceOver to draw the
background color when subpixel AA is enabled. Otherwise you
end up with a gray background. This affects macOS
10.14-10.15 with subpixel AA enabled. Issue 9710

2021-05-22: Fix dock menu not opening windows on the right
screen when restoring an arrangement. macOS weirdly forces
everything onto the same screen as the dock if you create
windows synchronously. Issue 9701

2021-05-21: Enable debugging in nightly.sh

2021-05-21: Fix disablement of slow triggers nag. Remove
copypasta error that disabled bracketed paste mode. Issue
9688

2021-05-17: Use the passed-in frame to rectByAdjustingWidth
to try to muscle windows back on to the right screen for
issue 9701

2021-05-17: Copy over server binary if the size has changed.
Issue 9637

2021-05-17: Introduce a rate limit for idempotent trigger
evaluation for issue 9688

2021-05-15: Don't ignore zero-width joiners. Instead, append
them to the preceding cell. This prevents a ligature from
forming at drawing time. Issue 9699

2021-05-15: Remove prompt marks when doing ED 0 (erase in
display below cursor). Fixes a bug where marks get left
behind in tmux integration with shell integration enabled
because the screen terminal uses ED 0 instead of ED 2 to
clear the screen.

2021-05-15: Draw the adjusted document-visible rect. The
adjusted rect is forced to the bottom when userScroll is
off, even if the scrollview isn't caught up yet. This
prevents artifacts for example in (non-integration) tmux
when saving lines to scrollback in alternate screen mode for
issue 9676

2021-05-15: Add support for evaluating idempotent triggers.
Issue 9688

2021-05-15: Always make window key and order front before
dragging (by status bar, tabbar control top edge in Minimal,
and buttons in tab bar.

2021-05-14: Since the crash in dictionary merging was very
common, try a different approach to avoid it.

2021-05-14: Fix crash due to closing a file descriptor more
than once

2021-05-14: Try to fix a crash when merging dictionaries.
This is kind of a hail mary

2021-05-14: Fix a bug where the top margin wasn't used when
GPU rendering was off and you're scrolled all the way to the
bottom

2021-05-14: When horizontal spacing is unset in a profile,
use the default value instead of 0. Fixes a bug where the
window shrinks when splitting a tab in a 1-tab window.

2021-05-14: When dragging a window by the tabbar make it key
and front on mousedown. Issue 9694

2021-05-12: Remove undesirable unselected tab shadow in
minimal. Added by 5a40c80c35fed50543794b3ddb7db10b298cabba

2021-05-11: Fix horrible performance of legacy renderer in
full screen. Issue 9670

2021-05-11: When scrolled to the bottom, draw the most
recent lines even if they arrived after -refresh. Issue 9676

2021-05-10: Remove references to large composer view's
textstorage before it is dealloced to avoid a dangling
reference in the undo manager. See also
https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/UndoArchitecture/Articles/CleaningUndoStack.html
and
https://lists.apple.com/archives/cocoa-dev/2009/Sep/msg01087.html.
Issue 9677

2021-05-10: Add debug logging for 9620

2021-05-09: Make 'movement keys scroll outside interactive
apps' into a profile pref and add another level of hierarchy
to keys prefs.

2021-05-08: Update setup.cfg after updating a dependency.
Allow setup.cfg to cause an upgrade of the iterm2 module
after importing an its file. Issue 9679

2021-05-08: Add files missed by previuos commit.

2021-05-08: Improve appearance of tabs on big sur to match
system. Issue 9682

2021-05-07: [python] Deprecated use_bright_bold and add
use_bold_color and brighten_bold_text. Issue 9683

2021-05-07: Tweaks and style improvements

2021-05-07: Update to detect network interface change using
MAC address

2021-05-07: Fix status bar shows incorrect network
throughput when network interfaces change

2021-05-07: Bounce metal on screen change only if resolution
or scale factor changed. Issue 9685

2021-05-06: Fix a retain cycle on PTYSession and a timer
leak on iTermMTKView

2021-05-03:  Fix preferences pane search bar style on Big
Sur. (#444)

* Fix preferences pane search bar style on Big Sur

* Rename to orderedToolbarIdentifiersExcludingSearch

Co-authored-by: George Nachman <gnachman+github@gmail.com>
2021-05-02: Add support for accelerating scroll events.
Issue 9636

2021-05-02: Change the default for alwaysAcceptFirstMouse to
YES since it was accidentally doing that since 1.0. Issue
9668

2021-05-02: Make TextViewWrapper permanently hidden. This
reduces CPU since it doesn't need to be drawn. Issue 8640

2021-05-01: Add more logging for last local directory
tracking

2021-05-01: Log date of nightly build failure to my login
script

2021-05-01: Add debug logging for badge label

2021-05-01: Add tmuxWindowPaneIndex (tmux 3.2+) for issue
9214

2021-05-01: Add logging for excessive timers for issue 9580
